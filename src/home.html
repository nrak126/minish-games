<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minish Games</title>
    <link rel="stylesheet" href="assets/styles/style.css">
  </head>
  <body>
    <h1 class="title">Minish games</h1>
    <button class="register-btn" onclick="window.location.href = 'my-page.html'">
      マイページ
    </button>
    
    <div class="games-grid">
      <div class="game-container">
        <img src="../public/games/power_janken/icon.png" alt="カードゲーム" />
        <h2>カードゲーム</h2>
        <div class="game-buttons">
          <button class="install" data-game="card-game" data-installed="false">インストール</button>
        </div>
      </div>

      <div class="game-container">
        <img src="../public/games/power_janken/icon.png" alt="パワーじゃんけん" />
        <h2>パワーじゃんけん</h2>
        <div class="game-buttons">
          <button class="install" data-game="power-janken" data-installed="false">インストール</button>
        </div>
      </div>

      <div class="game-container">
        <img src="../public/games/power_janken/icon.png" alt="Minish Race" />
        <h2>Minish Race</h2>
        <div class="game-buttons">
          <button class="install" data-game="minish-race" data-installed="false">インストール</button>
        </div>
      </div>

      <div class="game-container">
        <img src="../public/games/power_janken/icon.png" alt="ロシアンルーレット" />
        <h2>ロシアンルーレット</h2>
        <div class="game-buttons">
          <button class="install" data-game="russian-roulette" data-installed="false">インストール</button>
        </div>
      </div>
    </div>
		<script>
      // インストールの状態をローカルストレージから読み込む
      document.querySelectorAll('.install').forEach(button => {
        const game = button.dataset.game;
        const isInstalled = localStorage.getItem(`installed_${game}`) === 'true';
        if (isInstalled) {
          button.classList.add('installed');
          button.textContent = '開く';
          button.dataset.installed = 'true';
        }
      });

      // インストールボタンのクリックイベント
      document.querySelectorAll('.install').forEach(button => {
        button.addEventListener('click', (e) => {
          const game = e.target.dataset.game;
          const isInstalled = e.target.dataset.installed === 'true';

          if (!isInstalled) {
            // インストール処理
            e.target.classList.add('installed');
            e.target.textContent = '開く';
            e.target.dataset.installed = 'true';
            localStorage.setItem(`installed_${game}`, 'true');
          } else {
            // 開くの処理
            window.location.href = `games/${game}.html`;
          }
        });
      });
		</script>
	</body>
</html>
